<!-- TOC start (generated with https://github.com/derlin/bitdowntoc) -->

- [κΉμ΄ μ°μ„  νƒμƒ‰ DFS; Depth-First Search](#κΉμ΄-μ°μ„ -νƒμƒ‰-dfs-depth-first-search)
  - [DFS μ£Όμ” νΉμ§•](#dfs-μ£Όμ”-νΉμ§•)
  - [DFSμ λ™μ‘ λ°©μ‹](#dfsμ-λ™μ‘-λ°©μ‹)
  - [DFSμ κµ¬ν„](#dfsμ-κµ¬ν„)
    - [DFS μ•κ³ λ¦¬μ¦ κµ¬ν„ λ‹¨κ³„](#dfs-μ•κ³ λ¦¬μ¦-κµ¬ν„-λ‹¨κ³„)
  - [DFSμ μ‘μ©](#dfsμ-μ‘μ©)

<!-- TOC end -->


# κΉμ΄ μ°μ„  νƒμƒ‰ DFS; Depth-First Search

> π’΅ κ·Έλν”„λ‚ νΈλ¦¬ κµ¬μ΅°λ¥Ό νƒμƒ‰ν•λ” λ° μ‚¬μ©λλ” μ•κ³ λ¦¬μ¦μΌλ΅, 
κ°€λ¥ν• κΉμ΄ λ“¤μ–΄κ°€λ©΄μ„ λ°©λ¬Έν•μ§€ μ•λ” λ…Έλ“λ¥Ό νƒμƒ‰ν•λ©°, 
λ” μ΄μƒ κΉμ΄ λ“¤μ–΄κ° μ μ—†μ„ λ• μ΄μ „ λ…Έλ“λ΅ λμ•„κ°€μ„ λ‹¤λ¥Έ κ²½λ΅λ¥Ό νƒμƒ‰. 
μ£Όλ΅ κ·Έλν”„μ λ¨λ“  μ •μ μ„ λ°©λ¬Έν•κ±°λ‚ νΉμ • μ •μ μ„ μ°Ύλ” λ° μ‚¬μ©


## DFS μ£Όμ” νΉμ§•

- **νƒμƒ‰ λ°©μ‹**:
  - DFSλ” ν• μ •μ μ—μ„ μ‹μ‘ν•μ—¬ κ°€λ¥ν• ν• κΉμ΄ νƒμƒ‰μ„ μ§„ν–‰
  - λ” μ΄μƒ μ§„ν–‰ν•  μ μ—†λ” μƒνƒκ°€ λλ©΄, μ΄μ „μ λ…Έλ“λ΅ λμ•„κ°€μ„ λ‹¤λ¥Έ κ²½λ΅λ¥Ό νƒμƒ‰
    > μ‹μ‘ μ •μ μ ν• λ°©ν–¥μΌλ΅ κ° μ μλ” κ²½λ΅κ°€ μλ” κ³³κΉμ§€ κΉμ΄ νƒμƒ‰ν•΄ κ°€λ‹¤κ°€ λ” μ΄μƒ κ° κ³³μ΄ μ—†κ² λλ©΄, κ°€μ¥ λ§μ§€λ§‰μ— λ§λ‚¬λ κ°λ¦ΌκΈΈ κ°„μ„ μ΄ μλ” μ •μ μΌλ΅ λλμ•„μ™€μ„ λ‹¤λ¥Έ λ°©ν–¥μ μ •μ μΌλ΅ νƒμƒ‰μ„ κ³„μ† λ°λ³µν•μ—¬ κ²°κµ­ λ¨λ“  μ •μ μ„ λ°©λ¬Έν•λ” μν λ°©λ²•
- **κµ¬ν„ λ°©λ²•: β‰ κΌ­ μ¤νƒλ§ μλ”κ² μ•„λ‹λΌλ” μ μ„ μ•μ•„λ‘κΈ°**
  - **μ¬κ·€μ  κµ¬ν„**: ν•¨μκ°€ μκΈ° μμ‹ μ„ νΈμ¶ν•μ—¬ νƒμƒ‰μ„ μ§„ν–‰
  - **μ¤νƒ κΈ°λ° κµ¬ν„**: μ¤νƒμ„ μ‚¬μ©ν•μ—¬ νƒμƒ‰ν•  λ…Έλ“λ¥Ό κ΄€λ¦¬ (μ¤νƒμ€ LIFO(Last In, First Out) κµ¬μ΅°μ…λ‹λ‹¤.)
    > κ°€μ¥ λ§μ§€λ§‰μ— λ§λ‚¬λ κ°λ¦ΌκΈΈμ μ •μ μΌλ΅ λλμ•„κ°€μ„ λ‹¤μ‹ κΉμ΄ μ°μ„  νƒμƒ‰μ„ λ°λ³µν•΄μ•Ό ν•λ―€λ΅ ν›„μ…μ„ μ¶ κµ¬μ΅°μ μ¤νƒ μ‚¬μ©
- **μ‹κ°„ λ³µμ΅λ„**:
  - κ·Έλν”„μ μ •μ  μλ¥Ό V, κ°„μ„  μλ¥Ό EλΌκ³  ν•  λ•,  
    DFSμ μ‹κ°„ λ³µμ΅λ„λ” O(V+E)
        
- **κ³µκ°„ λ³µμ΅λ„**:
  - μ¤νƒμ„ μ‚¬μ©ν•λ” κ²½μ°, μµμ•…μ κ²½μ° O(V)μ κ³µκ°„μ΄ ν•„μ”

## DFSμ λ™μ‘ λ°©μ‹
1. **μ‹μ‘**:
   - μ‹μ‘ μ •μ μ„ μ„ νƒν•κ³ , μ΄ μ •μ μ„ λ°©λ¬Έν•©λ‹λ‹¤.
   - λ°©λ¬Έν• μ •μ μ„ κΈ°λ΅ν•μ—¬ λ¬΄ν• λ£¨ν”„λ¥Ό λ°©μ§€ν•©λ‹λ‹¤.
2. **μ¬κ·€ νΈμ¶ (λλ” μ¤νƒ μ‚¬μ©)**:
   - ν„μ¬ μ •μ μ λ¨λ“  μΈμ ‘ μ •μ μ— λ€ν•΄, κ·Έ μ •μ μ΄ λ°©λ¬Έλμ§€ μ•μ€ κ²½μ° μ¬κ·€ νΈμ¶(λλ” μ¤νƒμ— ν‘Έμ‹)ν•μ—¬ κΉμ΄ νƒμƒ‰μ„ κ³„μ†ν•©λ‹λ‹¤.
3. **λ°±νΈλν‚Ή**:
   - λ¨λ“  μΈμ ‘ μ •μ μ„ νƒμƒ‰ν• ν›„μ—λ” μ΄μ „ μ •μ μΌλ΅ λμ•„κ°€μ„ λ‹¤λ¥Έ κ²½λ΅λ¥Ό νƒμƒ‰ν•©λ‹λ‹¤.
4. **μΆ…λ£**:
   - λ¨λ“  μ •μ μ΄ λ°©λ¬Έλκ±°λ‚, νΉμ • μ΅°κ±΄(μ: λ©ν‘ μ •μ  λ„λ‹¬)μ΄ μ¶©μ΅±λ  λ• νƒμƒ‰μ„ μΆ…λ£ν•©λ‹λ‹¤.

## DFSμ κµ¬ν„

- μ¬κ·€μ  κµ¬ν„
    
    ```python
    def dfs_recursive(graph, node, visited):
        if node not in visited:
            visited.add(node)
            print(node)  # λ…Έλ“ λ°©λ¬Έ μ²λ¦¬
            for neighbor in graph[node]:
                dfs_recursive(graph, neighbor, visited)
    
    # μμ  μ‚¬μ©λ²•
    graph = {
        'A': ['B', 'C'],
        'B': ['A', 'D', 'E'],
        'C': ['A', 'F'],
        'D': ['B'],
        'E': ['B', 'F'],
        'F': ['C', 'E']
    }
    visited = set()
    dfs_recursive(graph, 'A', visited)
    
    # A
    # B
    # D
    # E
    # F
    # C
    ```
    
- μ¤νƒ κΈ°λ° κµ¬ν„
    
    ```python
    def dfs_stack(graph, start):
        visited = set()
        stack = [start]
        
        while stack:
            node = stack.pop()
            if node not in visited:
                visited.add(node)
                print(node)  # λ…Έλ“ λ°©λ¬Έ μ²λ¦¬
                stack.extend(neighbor for neighbor in graph[node] if neighbor not in visited)
    
    # μμ  μ‚¬μ©λ²•
    graph = {
        'A': ['B', 'C'],
        'B': ['A', 'D', 'E'],
        'C': ['A', 'F'],
        'D': ['B'],
        'E': ['B', 'F'],
        'F': ['C', 'E']
    }
    dfs_stack(graph, 'A')
    
    # A
    # C
    # F
    # E
    # B
    # D
    ```
    
    ```python
    # μλ„μ½”λ“
    visited[], stack[] μ΄κΈ°ν™”
    DFS(V)
    	μ‹μ‘μ  V λ°©λ¬Έ;
    	visited[v] <- true:
    	while{
    		if (vμ μΈμ ‘ μ •μ  μ¤‘ λ°©λ¬Έ μ•ν• μ •μ  wκ°€ μμΌλ©΄)
    			push(v);
    			v <- w; (wμ— λ°©λ¬Έ)
    			visited[w] <- True;
    		else:
    			if (μ¤νƒμ΄ λΉ„μ–΄ μμ§€ μ•μΌλ©΄)
    				v <- pop(stack)
    			else:
    				break
    	}
    end DFS()
    ```
    
<details>
<summary>DFS μ•κ³ λ¦¬μ¦ κµ¬ν„ λ‹¨κ³„</summary>
    
### DFS μ•κ³ λ¦¬μ¦ κµ¬ν„ λ‹¨κ³„
    
1. μ‹μ‘ μ •μ  vλ¥Ό κ²°μ •ν•μ—¬ λ°©λ¬Έν•λ‹¤.
  1. μ •μ  vμ— μΈμ ‘ν• μ •μ  μ¤‘μ—μ„
      1. λ°©λ¬Έν•μ§€ μ•μ€ μ •μ  wκ°€ μμΌλ©΄
          1. μ •μ  vλ¥Ό μ¤νƒμ— pushν•κ³ 
          2. μ •μ  wλ¥Ό λ°©λ¬Έ
          3. κ·Έλ¦¬κ³  wλ¥Ό vλ΅ ν•μ—¬ λ‹¤μ‹ 2λ²μ„ λ°λ³µ
      2. λ°©λ¬Έν•μ§€ μ•μ€ μ •μ μ΄ μ—†μΌλ©΄,
          1. νƒμƒ‰μ λ°©ν–¥μ„ λ°”κΎΈκΈ° μ„ν•΄μ„ μ¤νƒμ„ popν•μ—¬ λ°›μ€ κ°€μ¥ λ§μ§€λ§‰ λ°©λ¬Έ μ •μ μ„ vλ΅ ν•μ—¬ λ‹¤μ‹ 2λ² λ°λ³µ
  2. μ¤νƒμ΄ κ³µλ°±μ΄ λ  λ•κΉμ§€ 2λ²μ„ λ°λ³µ
---
1. μ΄κΈ° μƒνƒ: λ°°μ—΄ visitedλ¥Ό Falseλ΅ μ΄κΈ°ν™”ν•κ³ , κ³µλ°± μ¤νƒμ„ μƒμ„±
        
    <p align = 'center'>
    <image src = '..\image\stack-dfs1.png' width = 500>
    </p>
        
2. μ •μ  Aλ¥Ό μ‹μ‘μΌλ΅ κΉμ΄ μ°μ„  νƒμƒ‰μ„ μ‹μ‘

    <p align = 'center'>
    <image src = '..\image\stack-dfs2.png' width = 500>
    </p>
        
3. μ •μ  Aμ— λ°©λ¬Έν•μ§€ μ•μ€ μ •μ  B, Cκ°€ μμΌλ―€λ΅ Aλ¥Ό μ¤νƒμ— pushν•κ³ , μΈμ ‘μ •μ  Bμ™€ C μ¤‘μ—μ„ **μ¤λ¦„μ°¨μ**μ— λ”°λΌ Bλ¥Ό μ„ νƒν•μ—¬ νƒμƒ‰μ„ κ³„μ†ν•λ‹¤.

    <p align = 'center'>
    <image src = '..\image\stack-dfs3.png' width = 500>
    </p>    
    
4. μ •μ  Bμ— λ°©λ¬Έν•μ§€ μ•μ€ μ •μ  D, Eκ°€ μμΌλ―€λ΅ Bλ¥Ό μ¤νƒμ— pushν•κ³ , μΈμ ‘μ •μ  Dμ™€ Eμ¤‘μ—μ„ **μ¤λ¦„μ°¨μ**μ— λ”°λΌ Dλ¥Ό μ„ νƒν•μ—¬ νƒμƒ‰μ„ κ³„μ†ν•λ‹¤
  
    <p align = 'center'>
    <image src = '..\image\stack-dfs4.png' width = 500>
    </p>    

5. μ •μ  Dμ— λ°©λ¬Έν•μ§€ μ•μ€ μ •μ  Fκ°€ μμΌλ―€λ΅ Dλ¥Ό μ¤νƒμ— pushν•κ³ , μΈμ ‘μ •μ  Fλ¥Ό μ„ νƒν•μ—¬ νƒμƒ‰μ„ κ³„μ†ν•λ‹¤.

    <p align = 'center'>
    <image src = '..\image\stack-dfs5.png' width = 500>
    </p>    
  
6. μ •μ  Fμ— λ°©λ¬Έν•μ§€ μ•μ€ μ •μ  E, Gκ°€ μμΌλ―€λ΅ Fλ¥Ό μ¤νƒμ— push ν•κ³ , μΈμ ‘μ •μ  Eμ™€ G μ¤‘μ—μ„ μ¤λ¦„μ°¨μμ— λ”°λΌ Eλ¥Ό μ„ νƒν•μ—¬ νƒμƒ‰μ„ κ³„μ†ν•λ‹¤.
  
    <p align = 'center'>
    <image src = '..\image\stack-dfs6.png' width = 500>
    </p>    

7.  μ •μ  Eμ— λ°©λ¬Έν•μ§€ μ•μ€ μ •μ  Cκ°€ μμΌλ―€λ΅ Eλ¥Ό μ¤νƒμ— pushν•κ³ , μΈμ ‘μ •μ  Cλ¥Ό μ„ νƒν•μ—¬ νƒμƒ‰μ„ κ³„μ†ν•λ‹¤.

    <p align = 'center'>
    <image src = '..\image\stack-dfs7.png' width = 500>
    </p>    
  
8.  μ •μ  Cμ—μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μ—†μΌλ―€λ΅, λ§μ§€λ§‰ μ •μ μΌλ΅ λμ•„κ°€κΈ° μ„ν•΄ μ¤νƒμ„ popν•μ—¬ λ°›μ€ μ •μ  Eμ— λ€ν•΄μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μλ”μ§€ ν™•μΈ

    <p align = 'center'>
    <image src = '..\image\stack-dfs8.png' width = 500>
    </p>    

  
9.  μ •μ  Eλ” λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μ—†μΌλ―€λ΅, λ‹¤μ‹ μ¤νƒμ„ popν•μ—¬ λ°›μ€ μ •μ  Fμ— λ€ν•΄μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μλ”μ§€ ν™•μΈν•λ‹¤.
  
    <p align = 'center'>
    <image src = '..\image\stack-dfs9.png' width = 500>
    </p>    

10. μ •μ  Fμ— λ°©λ¬Έν•μ§€ μ•μ€ μ •μ  Gκ°€ μμΌλ―€λ΅ Fλ¥Ό μ¤νƒμ— pushν•κ³ , μΈμ ‘μ •μ  Gλ¥Ό μ„ νƒν•μ—¬ νƒμƒ‰μ„ κ³„μ†ν•λ‹¤.

    <p align = 'center'>
    <image src = '..\image\stack-dfs10.png' width = 500>
    </p>    
  
11. μ •μ  Gμ—μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μ—†μΌλ―€λ΅, λ§μ§€λ§‰ μ •μ μΌλ΅ λμ•„κ°€κΈ° μ„ν•΄ μ¤νƒμ„ popν•μ—¬ λ°›μ€ μ •μ  Fμ— λ€ν•΄μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μλ”μ§€ ν™•μΈ

    <p align = 'center'>
    <image src = '..\image\stack-dfs11.png' width = 500>
    </p>    
  
12. μ •μ  Fμ—μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μ—†μΌλ―€λ΅, λ‹¤μ‹ λ§μ§€λ§‰ μ •μ μΌλ΅ λμ•„κ°€κΈ° μ„ν•΄ μ¤νƒμ„ popν•μ—¬ λ°›μ€ μ •μ  Dμ— λ€ν•΄μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μλ”μ§€ ν™•μΈν•λ‹¤.

    <p align = 'center'>
    <image src = '..\image\stack-dfs12.png' width = 500>
    </p>    

13. μ •μ  Dμ—μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μ—†μΌλ―€λ΅, λ‹¤μ‹ λ§μ§€λ§‰ μ •μ μΌλ΅ λμ•„κ°€κΈ° μ„ν•΄ μ¤νƒμ„ popν•μ—¬ λ°›μ€ μ •μ  Bμ— λ€ν•΄μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μλ”μ§€ ν™•μΈν•λ‹¤.
  
    <p align = 'center'>
    <image src = '..\image\stack-dfs13.png' width = 500>
    </p>    

  
14. μ •μ  Bμ—μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μ—†μΌλ―€λ΅, λ‹¤μ‹ λ§μ§€λ§‰ μ •μ μΌλ΅ λμ•„κ°€κΈ° μ„ν•΄ μ¤νƒμ„ popν•μ—¬ λ°›μ€ μ •μ  Aμ— λ€ν•΄μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘μ •μ μ΄ μλ”μ§€ ν™•μΈν•λ‹¤.
  
    <p align = 'center'>
    <image src = '..\image\stack-dfs14.png' width = 500>
    </p>    
  
15. ν„μ¬ μ •μ  Aμ—μ„ λ°©λ¬Έν•μ§€ μ•μ€ μΈμ ‘ μ •μ μ΄ μ—†μΌλ―€λ΅ λ§μ§€λ§‰ μ •μ μΌλ΅ λμ•„κ°€κΈ° μ„ν•΄ μ¤νƒμ„ popν•λ”λ°, μ¤νƒμ΄ κ³µλ°±μ΄λ―€λ΅ κΉμ΄ μ°μ„  νƒμƒ‰μ„ μΆ…λ£ν•λ‹¤.

    <p align = 'center'>
    <image src = '..\image\stack-dfs15.png' width = 500>
    </p>    
        
    
---

μ…λ ¥μ€ λ³΄ν†µ λ…Έλ“ μμ™€ κ°„μ„  κ°μλ¥Ό μ•λ ¤μ¤

κ·Έλ¦¬κ³  μΈμ ‘ μ •μ  μ •λ³΄λ¥Ό 1-2, 2-4, 2-5 μ΄λ°μ‹μΌλ΅ μ•λ ¤μ¤

```python
'''
1
7 8
1 2 1 3 2 4 2 5 4 6 5 6 6 7 3 7
'''

def DFS(s, V):          # s: μ‹μ‘ μ •μ , V μ •μ  κ°μ(1λ² λ¶€ν„°μΈ μ •μ μ λ§μ§€λ§‰ μ •μ )
    visited = [0]*(V+1) # λ°©λ¬Έν• μ •μ μ„ ν‘μ‹
    stack = []          # μ¤νƒ μƒμ„±
    print(s)
    visited[s] = 1      # μ‹μ‘μ •μ  λ°©λ¬Έ ν‘μ‹
    v = s
    while True:
        for w in adjL[v]:       # vμ— μΈμ ‘ν•κ³ , λ°©λ¬Έμ•ν• wκ°€ μμΌλ©΄
            if visited[w] == 0:
                stack.append(v) # push(v) ν„μ¬ μ •μ μ„ push
                v = w
                print(v)        # wμ— λ°©λ¬Έ
                visited[w] = 1  # wμ— λ°©λ¬Έ ν‘μ‹
                break # for wμ— λ€ν• break # vλ¶€ν„° λ‹¤μ‹ νƒμƒ‰
        else:                   # λ‚¨μ€ μΈμ ‘μ •μ μ΄ μ—†μ–΄μ„ breakκ°€ κ±Έλ¦¬μ§€ μ•μ€ κ²½μ°
            if stack:           # μ΄μ „ κ°λ¦ΌκΈΈμ„ μ¤νƒμ—μ„ κΊΌλ‚΄μ„
                v = stack.pop()
            else:
                break # whileμ— λ€ν• break

T = int(input())
for tc in range(1, T+1):
    V, E = map(int, input().split())

    # adjl = [[], [2, 3] ... ]
    adjL = [[] for _ in range(V+1)]
    arr = list(map(int, input().split()))

    for i in range(E):
        v1, v2 = arr[i*2], arr[i*2+1]
        adjL[v1].append(v2) # λ…Έλ“ λ³„λ΅ μΈμ ‘ν• ν–‰λ ¬  μ •λ³΄ μ…λ ¥ν•κΈ°

    DFS(1,V)
    

# 1
# 2
# 4
# 6
# 7
# 5
# 3
```
</details>

## DFSμ μ‘μ©

- **κ²½λ΅ μ°ΎκΈ°**: νΉμ • μ •μ μΌλ΅ κ°€λ” κ²½λ΅λ¥Ό μ°Ύλ” λ° μ‚¬μ©λ  μ μμµλ‹λ‹¤.
- **μ •μ μ μ—°κ²°μ„± κ²€μ‚¬**: κ·Έλν”„μ λ¨λ“  μ •μ μ΄ μ„λ΅ μ—°κ²°λμ–΄ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤.
- **μ‚¬μ΄ν΄ νƒμ§€**: κ·Έλν”„μ— μ‚¬μ΄ν΄μ΄ μ΅΄μ¬ν•λ”μ§€ κ²€μ‚¬ν•©λ‹λ‹¤.
- **ν† ν΄λ΅μ§€ μ •λ ¬**: DAG(Directed Acyclic Graph)μ—μ„ μ •μ μ μμ„λ¥Ό μ •λ ¬ν•©λ‹λ‹¤.

DFSλ” κ·Έλν”„μ κµ¬μ΅°μ™€ μ„±μ§μ„ κΉμ΄ νƒμƒ‰ν•λ” λ° μ μ©ν•λ©°, λ‹¤μ–‘ν• κ·Έλν”„ κ΄€λ ¨ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ” λ° μ¤‘μ”ν• μ•κ³ λ¦¬μ¦μ…λ‹λ‹¤.